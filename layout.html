
<!DOCTYPE html>
{% set lang = session.get('language', 'en') %}
<html lang="{{ lang }}" {% if lang == 'ur' %}dir="rtl"{% endif %} class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ _(title) }} - AgroScan AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Nastaliq+Urdu:wght@400;700&family=Noto+Sans+Devanagari:wght@400;700&family=Noto+Sans+Tamil:wght@400;700&family=Noto+Sans+Bengali:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        html[lang="ur"] body { font-family: 'Noto Nastaliq Urdu', sans-serif; }
        html[lang="hi"] body, html[lang="mr"] body, html[lang="gu"] body { font-family: 'Noto Sans Devanagari', sans-serif; }
        html[lang="ta"] body { font-family: 'Noto Sans Tamil', sans-serif; }
        html[lang="bn"] body { font-family: 'Noto Sans Bengali', sans-serif; }
        .transition-all { transition: all 0.3s ease-in-out; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <nav class="bg-white/80 backdrop-blur-lg fixed top-0 left-0 right-0 z-20 shadow-md">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <a href="{{ url_for('home') }}" class="flex items-center space-x-2">
                     <svg class="h-8 w-8 text-green-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" /></svg>
                    <span class="text-2xl font-bold text-gray-800">AgroScan AI</span>
                </a>
                <div class="flex items-center space-x-4">
                    <div class="hidden md:flex items-center space-x-6">
                        {% if current_user.is_authenticated %}
                            <span class="text-gray-700">{{ _('Welcome') }}, {{ current_user.username }}!</span>
                            <a href="{{ url_for('dashboard') }}" class="text-gray-600 hover:text-green-600 font-medium transition-all">{{ _('Dashboard') }}</a>
                            <a href="{{ url_for('analyze_page') }}" class="text-gray-600 hover:text-green-600 font-medium transition-all">{{ _('Analyze') }}</a>
                            <a href="{{ url_for('history') }}" class="text-gray-600 hover:text-green-600 font-medium transition-all">{{ _('History') }}</a>
                            <a href="{{ url_for('resources') }}" class="text-gray-600 hover:text-green-600 font-medium transition-all">{{ _('Resources') }}</a>
                            <a href="{{ url_for('logout') }}" class="text-blue-600 hover:text-blue-800 font-bold transition-all">{{ _('Logout') }}</a>
                        {% else %}
                             <a href="{{ url_for('login') }}" class="text-gray-600 hover:text-green-600 font-medium transition-all">{{ _('Login') }}</a>
                             <a href="{{ url_for('register') }}" class="text-gray-600 hover:text-green-600 font-medium transition-all">{{ _('Register') }}</a>
                        {% endif %}
                    </div>
                    <div class="relative" x-data="{ open: false }" @click.away="open = false">
                        <button @click="open = !open" class="flex items-center p-2 rounded-lg hover:bg-gray-200">
                           <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M7.75 2.75a.75.75 0 00-1.5 0v1.258a32.987 32.987 0 00-3.599.278.75.75 0 10.198 1.487A31.545 31.545 0 018.7 5.545 19.38 19.38 0 017 9.762V11.5a.75.75 0 001.5 0V9.762c0-.683.085-1.35.25-1.994.169-.65.4-1.28.68-1.86A7.94 7.94 0 0112 6.561v4.939a.75.75 0 101.5 0V6.561a7.94 7.94 0 012.07 1.407c.28.58.512 1.21.68 1.86.165.643.25 1.311.25 1.994V11.5a.75.75 0 001.5 0V9.762a19.38 19.38 0 01-1.7 4.217 31.545 31.545 0 014.101-.987.75.75 0 00.198-1.487 32.987 32.987 0 00-3.599-.278V2.75a.75.75 0 00-1.5 0v1.439a7.94 7.94 0 01-3.12 1.548A7.94 7.94 0 019.25 4.19V2.75zM8.5 13.25a.75.75 0 00-1.5 0v2a.75.75 0 001.5 0v-2z" /></svg>
                        </button>
                        <div x-show="open" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-30" style="display: none;">
                            <a href="/language/en" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">English</a>
                            <a href="/language/hi" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">हिन्दी (Hindi)</a>
                            <a href="/language/mr" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">मराठी (Marathi)</a>
                            <a href="/language/bn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">বাংলা (Bengali)</a>
                            <a href="/language/ta" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">தமிழ் (Tamil)</a>
                            <a href="/language/te" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">తెలుగు (Telugu)</a>
                            <a href="/language/gu" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">ગુજરાતી (Gujarati)</a>
                            <a href="/language/ur" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">اردو (Urdu)</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <main class="pt-16">
        {% block content %}{% endblock %}
    </main>
    <footer class="bg-white border-t border-gray-200 mt-12">
        <div class="max-w-6xl mx-auto py-6 px-4 text-center text-gray-500">
            <p>{{ _('© 2025 AgroScan AI. A Student Project powered by Google AI.') }}</p>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
</body>
</html>
